#if !defined(MSG_MNGT_SEPTI)
#define MSG_MNGT_SEPTI

  


#ifdef WIN32
#include <windows.h>
#include <windowsx.h>
#include <specstrings.h>
#endif

#include <string>
#include "../../NWN2Lib/NWN2.h"
#include "../../NWN2Lib/NWN2Common.h"
#include "../../misc/log.h"

static unsigned char ramasserEquipement[] = {
	0x50, 0x05, 0x01, 0x24, 0x00, 0x00, 0x00, 0x44, 0x06, 0xDD, 0x00, 0x00, 0x80, 0x55, 0x05, 0xFE,
	0xFF, 0xFF, 0xFF, 0x04, 0x04, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x80,
	0x3F, 0x00, 0x00, 0x43, 0xB1
};
static unsigned char removeArmor[] = {
	0x50, 0x05, 0x01, 0x87, 0x02, 0x00, 0x00, 0x50, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00, 0x03, 0x00,
	0x00
};

static unsigned char removeArmorMiddle[] = {
	0x01, 0x44, 0x00, 0x00, 0x00, 0x7F, 0x02, 0x00, 0x00, 0x00
};

static unsigned char removeArmorEnd[] = {
	0x55, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00
};

static unsigned char removeCloak[] = {
	0x50, 0x05, 0x01, 0x25, 0x00, 0x00, 0x00, 0x50, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00, 0x02, 0x00,
	0x00, 0x01, 0x44, 0x00, 0x00, 0x00, 0x7F, 0x40, 0x00, 0x00, 0x00, 0x55, 0x05, 0xFE,	0xFF, 0xFF,
	0xFF, 0x00, 0x00, 0x00, 0x00, 0x60
};

static unsigned char removeEquipment[] = {
	0x50, 0x05, 0x01, 0x56, 0x01, 0x00, 0x00, 0x50, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00, 0x03, 0x00, 0x00
};

static unsigned char removeEquipmentEndPart[] = {
	0x01, 0x44, 0x00, 0x00, 0x00, 0x7F, 0x01, 0x00, 0x00, 0x00, 0x55, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00,
	0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00
};

static unsigned char removeFromHand[] = {
	0x50, 0x05, 0x01, 0x25, 0x00, 0x00, 0x00, 0x50, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00, 0x02, 0x00,
	0x00, 0x01, 0x44, 0x00, 0x00, 0x00, 0x7F, 0x20, 0x00, 0x00, 0x00, 0x55, 0x05, 0xFE, 0xFF, 0xFF,
	0xFF, 0x00, 0x00, 0x00, 0x00, 0x65
};

static unsigned char refreshNudeP1[] = {
	0x50, 0x05, 0x01, 0x92, 0x01, 0x00, 0x00, 0x50, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x04, 0x01, 0x00,
	0x00
};

static unsigned char refreshNudeP2[] = {
	0x55, 0x05, 0xFE, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x16
};



	uint32_t addObjectToWorld(int mustView, GameObject* Object, uint8_t* myMessage);

	bool LoadNetLayer(LogNWNX* logger);
	bool refreshItemApp(int iInventorySlot, int iAffected, int iItem, int mustView);
	bool ramasserObjet(int iAffected, int mustView, int iItem);
	bool removeVisual(int iInventorySlot, int iAffected, int mustView);
	bool deposeObject(int iInventorySlot, int iAffected, int mustView, int iItem);
	bool refreshNude(int iAffected, int mustView);
	bool refreshNude_Verif(int iAffected, int mustView);
	bool refreshBelt(int iAffected, int mustView);
	//unsigned char monTrucMsg[0x700];
	bool sendMusicMessage(int iType, int iOption, int iValue, int mustView);
	bool PrepaSendMessageToPlayer(unsigned long PlayerId, unsigned char* Data, unsigned long Size, unsigned long Flags);
	uint32_t getArmorEquiped(int iAffected);

	void refreshForEveryConcerned(uint32_t iAffected);
	void removeForEveryConcerned(uint32_t iAffected, int iInventorySlot);

	uint32_t GetPCIntern(bool first, bool bOwnedCharacter, int varIdx = 33);
	unsigned long GetObjectToPlayerId(int iParam);
	bool __fastcall IsKnowByPlayer(__in NWN::PLAYERID PlayerId, __in NWN::OBJECTID ObjectId);

	void setLoggerMsg(LogNWNX* myLogger);


#endif
